Лабораторно-практична робота №3

Тема: Розробка та тестування захищеного REST API на Node.js та EXPRESS.

Мета: Закріплення теоретичних знань та набуття практичних навичок з розробки, захисту та тстування серверних додатків на базі REST архітектури.

Хід роботи:

- Короткий опис та призначення API

API (Application Programming Interface), або Інтерфейс Програмного Застосування, - це набір правил і протоколів, який дозволяє різним програмним системам взаємодіяти одна з одною. У контексті веб-розробки (зокрема, REST API), він виступає як посередник між клієнтом (наприклад, мобільним додатком, вебсайтом або Postman) і сервером, де зберігаються дані.

Головна мета цього API - надати структурований і безпечний доступ до ресурсів (документів, співробітників) на сервері. Клієнт відправляє запит (наприклад, отримати список документів), а API обробляє його, виконує необхідні дії (включно з автентифікацією та авторизацією) і повертає відповідні дані або повідомлення про статус. Це дозволяє розділяти логіку фронтенду та бекенду, роблячи розробку більш гнучкою, масштабованою та модульною.

- Інструкції з встановлення залежностей та запуску: npm install, npm start.

Щоб запустити бекенд-сервіс на основі Node.js та Express, потрібно виконати наступні кроки в кореневій директорії проекту:

- використати команду npm install для завантаження всіх необхідних пакетів (залежностей), перелічених у файлі package.json (зокрема, Express):

Bash

npm install

- після успішного встановлення залежностей, потрібно запустити сервер, використовуючи команду, визначену у файлі package.json як стартовий скрипт ("start": "node server.js"):

Bash

npm start

Після запуску з'явиться повідомлення у консолі про те, що сервер працює, зазвичай:

Server is running on <http://localhost:3000>

- Інструкції з запуску тестового клієнта: npm test

Для перевірки функціональності та коректності роботи API (виконання інтеграційних та/або юніт-тестів), потрібно використати команду npm test. Ця команда виконає всі тестові скрипти, які визначені у проекті:

Bash

npm test

У консолі відобразяться результати виконання тестів, показуючи, які маршрути та функціональність працюють коректно, а де були виявлені помилки.

- Таблиця з описом всіх реалізованих ендпоінтів, де вказано:

- HTTP-метод та URL (наприклад, GET /documents).
- Короткий опис ендпоінту.
- Необхідні заголовки для аутентифікації.
- Приклад тіла запиту (для POST).
- Можливі коди відповіді та їх значення.

| **Метод** | **URL** | **Заголовки (Headers)** | **Тіло (Body)** | **Очікуваний статус** | **Примітка** |
| --- | --- | --- | --- | --- | --- |
| GET | /   | \-  | \-  | **'Hello World! The server is running.'** | Текст, який відобразиться, якщо сервер працює |
| GET | /documents | \-  | \-  | **200 OK** | JSON-масив із двома документами |
|     | /employees | \-  | \-  | **200 OK** | JSON-масив із двома співробітниками |
| POST | documents | \-  | { "title": "Q3 Financial Report", "content": "… } | **201 Created** | новий документ додався до списку |
| GET | /documents | \-  | \-  | **401 Unauthorized** | Спроба доступу без аутентифікації. |
| GET | /employees | X-Login: user1<br><br>\`X-Password: password123\` | \-  | **403 Forbidden** | Спроба доступу до адмін-ресурсу з роллю 'user'. |
| GET | /documents | X-Login: user1<br><br>\`X-Password: password123\` | \-  | **200 OK** | Успішне отримання даних з роллю 'user'. |
| GET | /employees | X-Login: admin1<br><br>\`X-Password: password123\` | \-  | **200 OK** | Успішне отримання даних з роллю 'admin'. |
| POST | /documents | X-Login: user1<br><br>\`X-Password: password123\` | { "title": "Test Doc", "content": "..." } | **201 Created** | Успішне створення ресурсу. |
| POST | /documents | X-Login: user1<br><br>\`X-Password: password123\` | { "content": "..." } | **400 Bad Request** | Помилка валідації (відсутнє поле title). |
| DELETE | /documents/1 | X-Login: admin1<br><br>\`X-Password: password123\` | \-  | **204 No Content** | Успішне видалення. Відповідь не має тіла. |
| GET | /non-existent | X-Login: admin1<br><br>\`X-Password: password123\` | \-  | **404 Not Found** | Звернення до неіснуючого маршруту. |

- Посилання на публічний репозиторій

<https://github.com/Dv4c/secure-api-lab>

Висновок: на даній лабораторно-практичній роботі було закріплено теоретичні знання та набуто практичних навичок з розробки, захисту та тестування серверних додатків на базі REST архітектури з використанням Node.js та фреймворку Express.

У ході роботи був створений багатофункціональний вебсервер, який:

- Успішно реалізував RESTful ендпоінти (GET, POST, DELETE) для управління ресурсами (/documents та /employees), забезпечуючи коректну обробку HTTP-методів та повернення відповідних кодів стану (200, 201, 204, 400, 404).
- Забезпечив захист API шляхом реалізації власних проміжних обробників (middleware) для:
  - Аутентифікації (authMiddleware): перевірка ідентичності користувача за допомогою заголовків X-Login та X-Password та повернення 401 Unauthorized у разі невдачі.
  - Авторизації за ролями (adminOnlyMiddleware): перевірка прав доступу аутентифікованого користувача до конфіденційного ресурсу (/employees) та повернення 403 Forbidden для неадміністраторів.
- Впровадив наскрізну функціональність логування (loggingMiddleware), яка реєструє в консолі інформацію про кожен вхідний запит.

Проведене комплексне тестування за допомогою браузера, Postman та спеціального Node.js скрипта (test-client.js) підтвердило, що всі реалізовані механізми (маршрутизація, аутентифікація, авторизація та валідація даних) працюють коректно відповідно до вимог безпеки та архітектурного стилю REST. Таким чином, мета роботи була повністю досягнута, а набуті навички готові до застосування в подальших проєктах.
